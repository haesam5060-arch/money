# 매집 감지 엔진 (SDE+VPD+벤포드) 검증 리포트

> 검증일: 2026-03-01
> 데이터: 195종목 × 약 10년 (XML OHLCV)
> 엔진 위치: `public/signal-engine.js`

---

## 1. 엔진 구조

### 시그널 체계 (detectSDE)
| Signal | 의미 | 매수 |
|--------|------|------|
| 0 | 패턴 없음 | X |
| **2** | **급락→건조기 진행 중** | **매수 타이밍** |
| 3 | 급락→건조→폭발 완료 | 매수 불가 (추격) |

### 필수 게이트 (4개)
1. **RSI 20~85** — 극단 구간 차단
2. **5일 변동률 ≤ 15%** — 급변동 차단
3. **SDE signal === 2** — 건조기 확인 (폭발 전)
4. **건조기 품질** — 5일 레인지 ≥ 5% AND 저점 회복률 ≥ 3%

### 스코어링 (16점 만점)
| 항목 | 배점 | 기준 |
|------|------|------|
| SDE 패턴 | 5점 (필수) | 급락→건조기 진행 확인 |
| VPD | 0~4점 | ≥5.0 강괴리(4) / ≥3.0 괴리(2.5) / ≥2.0 약(1) |
| 벤포드 멀티윈도우 | 0~3점 | 강이탈(3) / 이탈(1.5) |
| 거래량 압축 | 0~2점 | 10일 평균 <0.6배 건조(2) / <0.8배 감소(1) |
| 건조기 활력도 | 0~2점 | 5일레인지≥8%+회복≥7%(2) / ≥5%+≥3%(1) |

### 매매 파라미터 (ACCUM_PROFILES.default)
| 파라미터 | 값 | 근거 |
|----------|-----|------|
| TP | 10% | 그리드서치 최적 (TP 도달율 50%) |
| SL | 13% | 전 구간 최적 |
| MaxHold | 30일 | 타임아웃 23%로 최소화 |
| Cooldown | 10일 | 중복 진입 방지 |
| 진입 | 종가 | signal=2 당일 종가 매수 |

---

## 2. 검증 결과

### 2-1. 전체 성과
| 지표 | 값 |
|------|-----|
| 총 거래 | 4,831건 |
| 승률 | **58.0%** |
| EV (기대수익률) | **+1.02%** |
| 평균 승 | +10.15% |
| 평균 패 | -8.39% |
| 평균 보유일 | 15.3일 |
| TP 도달율 | 50.0% |
| SL 도달율 | 26.9% |
| 타임아웃율 | 23.1% |

### 2-2. 확인 지표 수별 성과
| 확인 수 | 거래 | 승률 | EV |
|---------|------|------|-----|
| 2개 | 1,037 | 49.0% | +0.69% |
| 3개 | 3,140 | 51.9% | +1.25% |
| **4개** | 459 | **53.6%** | **+1.46%** |
| **5개** | 17 | **58.8%** | **+2.57%** |

→ 확인 지표가 많을수록 성과 향상 (정상 패턴)

### 2-3. TP/SL 그리드서치 (상위 5)
| TP | SL | Hold | 거래 | 승률 | EV | TP율 |
|----|-----|------|------|------|-----|------|
| 20% | 13% | 30d | 4,377 | 49.9% | +1.67% | 24.2% |
| 15% | 13% | 30d | 4,520 | 52.2% | +1.39% | 34.9% |
| 12% | 13% | 30d | 4,671 | 55.0% | +1.16% | 43.1% |
| **10%** | **13%** | **30d** | **4,831** | **58.0%** | **+1.02%** | **50.0%** |
| 8% | 13% | 30d | 5,033 | 62.3% | +0.82% | 57.4% |

→ TP=10% 선택: 승률-EV-TP율 균형 최적

---

## 3. 건조기 진입 품질 분석

### 데이터에서 발견한 핵심 필터

#### 5일 레인지 (가장 강력한 예측 변수)
| 5일 레인지 | 거래 | 승률 | EV |
|-----------|------|------|-----|
| < 3% | 146 | 51.4% | **-0.41%** |
| 3~5% | 1,054 | 47.9% | +0.13% |
| **5~8%** | 2,133 | 52.1% | +1.16% |
| **8~12%** | 1,582 | 53.7% | **+1.57%** |
| 12%+ | 745 | 53.3% | **+1.86%** |

→ 5일 레인지 < 5% = 죽은 종목 (게이트로 차단)

#### 저점 회복률
| 회복률 | EV |
|--------|-----|
| 0~3% | +0.85% |
| 3~7% | +1.12% |
| 7~12% | +1.25% |
| 20%+ | **+1.95%** |

→ 회복률 < 3% = 바닥 미탈출 (게이트로 차단)

---

## 4. 정렬 기준

1차: **확인 지표 수** (내림차순) — 독립적 확인이 많을수록 신뢰도 높음
2차: **종합 점수** (내림차순) — 같은 확인 수 내에서 점수 순

---

## 5. 엔진 개선 히스토리

| 버전 | 변경 | 승률 | EV |
|------|------|------|-----|
| v1 (signal=3) | 폭발일 진입 | 57.9% | +3.01% |
| v2 (signal=2 무필터) | 건조기 아무 날 진입 | 51.8% | +1.12% |
| v3 (품질 게이트) | 5일레인지+회복률 필터 | 51.5% | +1.15% |
| **v4 (최종)** | **활력도 보너스 + TP=10% Hold=30d** | **58.0%** | **+1.02%** |

> v1(폭발일 진입)은 라이브에서 구현 불가 → v4가 실전 최적

---

## 6. 라이브 운영 가이드

### 스캔 모드
- config.json: `"scanMode": "accumulation"`
- accumThreshold: `6.5` (SDE 5점 + 보조 최소 1.5점)

### 추천 종목 판단
1. **확인 4~5개** = 강력 추천 (53~59% WR)
2. **확인 3개** = 추천 (52% WR)
3. **확인 2개** = 관망 (49% WR, 임계값 이하)

### 주의사항
- signal=3(이미 폭발) 종목은 자동 차단됨
- 건조기 비활성(5일레인지 <5%) 종목도 자동 차단
- 저점 미회복(<3%) 종목도 자동 차단
